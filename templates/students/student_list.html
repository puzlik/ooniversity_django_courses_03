{% extends "base.html" %}

{% load staticfiles %}

{% block title %}pyBursa | Students{% endblock title %}

{% block nav_class_students %}active{% endblock nav_class_students %}

{% block content %} 
    {% if messages %}<div class="messages">
      {% for message in messages %}
        {{ message }}
      {% endfor %}
    </div>{% endif %}
<div class="stud-btn">
  <a href="{% url 'students:add' %}"><button type="button" class="btn btn-info" onclick="/"><span class="glyphicon glyphicon-plus"></span>Добавить нового студента</button></a>
</div>
<div class="list-of-courses">
<h1> Список студентов</h1>
  <table>
    <tr>
      <th class="head-name">номер</th>
      <th class="head-name">фамилия имя</th>
      <th class="head-name">адрес</th>
      <th class="head-name">skype</th>
      <th class="head-name">курсы</th>
      <th class="head-name">изменить</th>
      <th class="head-name">удалить</th>
    </tr>
    {% for student in object_list %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td><a href="{% url 'students:detail' student.id %}">{{ student.surname }} {{ student.name}} </a></td>
      <td>{{ student.address }}</td>
      <td>{{ student.skype }}</td>
      <td> {% for s_courses in student.courses.all %}
        <p><a href="{% url 'courses:detail' s_courses.id %}">{{ s_courses }}</a></p>
          {% endfor %}
      </td>
      <td><a href="{% url 'students:edit' student.id %}"><button type="button" class="btn btn-info" onclick="/"><span class="glyphicon glyphicon-pencil"></span>Изменить</button></a></td></td>
      <td><a href="{% url 'students:remove' student.id %}"><button type="button" class="btn btn-info" onclick="/"><span class="glyphicon glyphicon-remove"></span>Удалить</button></a></td></td>
    </tr>
    {% endfor %}
  </table>
</div>
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}"><< previous</a>
        {% endif %}

        <span class="current">
          {% for num_page in paginator.page_range %}
            
            {% if num_page == page_obj.number %}
              <a href="" class="active-page">{{ num_page }}</a>
            {% else %}
              <a href="?page={{ num_page }}">{{ num_page }}</a>
            {% endif %}
          {% endfor %}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next >></a>
        {% endif %}
    </span>
</div>

{% include 'include/stud_img3_include.html' %}

{% endblock content %}